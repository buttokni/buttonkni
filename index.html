<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>diddy</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            background-color: #0a1929;
            color: white;
        }

        .container {
            max-width: 600px;
            width: 100%;
            text-align: center;
        }

        .image-container {
            margin: 20px 0;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .image-container img {
            width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            object-fit: cover;
        }

        @keyframes shake {
            0% { transform: translate(-50%, 0); filter: blur(0); }
            10% { transform: translate(-50%, 0) translateX(9px); filter: blur(1px); }
            20% { transform: translate(-50%, 0) translateX(-8px); filter: blur(1px); }
            30% { transform: translate(-50%, 0) translateX(7px); filter: blur(1px); }
            40% { transform: translate(-50%, 0) translateX(-6px); filter: blur(0.5px); }
            50% { transform: translate(-50%, 0) translateX(5px); filter: blur(0.5px); }
            60% { transform: translate(-50%, 0) translateX(-4px); filter: blur(0.5px); }
            70% { transform: translate(-50%, 0) translateX(3px); filter: blur(0px); }
            80% { transform: translate(-50%, 0) translateX(-2px); }
            90% { transform: translate(-50%, 0) translateX(1px); }
            100% { transform: translate(-50%, 0); }
        }

        @keyframes rainbow {
            0% { border-color: #ff0000; }
            17% { border-color: #ff8800; }
            33% { border-color: #ffff00; }
            50% { border-color: #00ff00; }
            67% { border-color: #0099ff; }
            83% { border-color: #6633ff; }
            100% { border-color: #ff0000; }
        }

        @keyframes rainbowBackground {
            0% { background-color: #ff0000; }
            17% { background-color: #ff8800; }
            33% { background-color: #ffff00; }
            50% { background-color: #00ff00; }
            67% { background-color: #0099ff; }
            83% { background-color: #6633ff; }
            100% { background-color: #ff0000; }
        }

        .error-popup, .success-popup {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translate(-50%, 0);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            animation: shake 2s cubic-bezier(0.45, 0.05, 0.55, 0.95) forwards;
            display: none;
        }

        .error-popup {
            background-color: #ff3333;
        }

        .success-popup {
            background-color: #33ff66;
        }

        .code-input {
            margin: 20px 0;
        }

        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            width: 200px;
            margin-right: 10px;
            background: transparent;
            border: 3px solid #ff0000;
            border-radius: 8px;
            color: white;
            animation: rainbow 5s linear infinite;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #ff0000;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 8px;
            animation: rainbowBackground 5s linear infinite;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.05);
        }

        .hint-container {
            margin: 20px 0;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .hint-progress {
            font-family: monospace;
            font-size: 24px;
            letter-spacing: 8px;
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
            color: white;
        }

        .hint-line {
            width: 100%;
            text-align: center;
        }

        .timer {
            font-size: 14px;
            color: #ffffff;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="image-container">
            <img src="https://lh7-us.googleusercontent.com/x5gqgqsNKMxxj1rK8e-fg_pp5t_WiM1sPZsE7eNcvZ_3hnebxZFKweji32Q2q5ntiBgbQ90hOqhKrdZLR7rWuakI9_hn_swBaaKwFvjWfPXIRZlqfl8hwB_aAdYfCQT1yF8FmkeejRFLbkJp5fTcfeUOTA2yuA" alt="Challenge Image">
        </div>
        
        <div class="hint-progress" id="hintProgress"></div>

        <div class="code-input">
            <input type="text" id="codeInput" placeholder="..." maxlength="7">
            <button onclick="checkCode()">submit</button>
        </div>

        <div class="error-popup" id="errorPopup">wrong</div>
        <div class="success-popup" id="successPopup">Congratulations! You're cool.</div>

        <div class="hint-container">
            <h3>hint</h3>
            <div class="timer" id="timer"></div>
        </div>
    </div>

    <script>
        const correctCode = 'dilated';

        const hints = [
            "The first letter is 'd'",
            "The second letter is 'i'",
            "The third letter is 'l'",
            "The fourth letter is 'a'",
            "The fifth letter is 't'",
            "The sixth letter is 'e'",
            "The final letter is 'd'"
        ];

        // Initialize with current time and start timers
        let startDate = new Date().toISOString();
        localStorage.setItem('startDate', startDate);

        function getMinutesPassed() {
            const now = new Date();
            const start = new Date(startDate);
            return Math.floor((now - start) / (1000 * 60));
        }

        function updateTimer() {
            const now = new Date();
            const start = new Date(startDate);
            const elapsed = now - start;
            const nextInterval = Math.ceil(elapsed / (10 * 60 * 1000)) * (10 * 60 * 1000);
            const remaining = nextInterval - elapsed;
            
            const minutes = Math.floor(remaining / (60 * 1000));
            const seconds = Math.floor((remaining % (60 * 1000)) / 1000);
            
            document.getElementById('timer').textContent = 
                `${minutes}m ${seconds}s`;
        }

        function updateRevealedLetters() {
            const minutesPassed = getMinutesPassed();
            const letterToShow = Math.min(Math.floor(minutesPassed / 10), correctCode.length - 1);
            
            const hintProgressDiv = document.getElementById('hintProgress');
            hintProgressDiv.innerHTML = ''; // Clear existing hint
            
            // Show single line with current progress
            const hintLine = document.createElement('div');
            hintLine.className = 'hint-line';
            let line = '';
            
            // Build the line with revealed letters and dashes
            for (let i = 0; i < correctCode.length; i++) {
                if (i <= letterToShow) {
                    line += correctCode[i].toUpperCase();
                } else {
                    line += '-';
                }
                if (i < correctCode.length - 1) {
                    line += ' ';
                }
            }
            
            hintLine.textContent = line;
            hintProgressDiv.appendChild(hintLine);
        }

        function checkCode() {
            const input = document.getElementById('codeInput').value.toLowerCase();
            const errorPopup = document.getElementById('errorPopup');
            
            if (input === correctCode) {
                const successPopup = document.getElementById('successPopup');
                const codeInput = document.getElementById('codeInput');
                const submitButton = codeInput.nextElementSibling;
                const image = document.querySelector('.image-container img');
                
                // Show success message
                if (successPopup.style.display === 'block') {
                    return;
                }
                
                successPopup.style.display = 'block';
                successPopup.style.animation = 'none';
                successPopup.offsetHeight; // Trigger reflow
                successPopup.style.animation = 'shake 2s cubic-bezier(0.45, 0.05, 0.55, 0.95) forwards';
                
                // Hide input and button
                codeInput.style.display = 'none';
                submitButton.style.display = 'none';
                
                // Change image
                image.src = 'https://lh7-us.googleusercontent.com/ZYWCJvyRjPnufQg6NApxIfVSGgt_Fo0WMOwWrOekR2pq5QjROu5LZUYxeb-OdAsxv_l4gJyiL3tUnaYAtdL00uichq7B-BHXmrdJP-bO8ZVJrEvAIe7MKI8XdIZvGt8SQhjZXofxP-IvSsek3P2GuaSOTAInKw';
                
                setTimeout(() => {
                    successPopup.style.display = 'none';
                }, 900);
            } else {
                // If animation is already running, don't start a new one
                if (errorPopup.style.display === 'block') {
                    return;
                }
                
                errorPopup.style.display = 'block';
                errorPopup.style.animation = 'none';
                errorPopup.offsetHeight; // Trigger reflow
                errorPopup.style.animation = 'shake 2s cubic-bezier(0.45, 0.05, 0.55, 0.95) forwards';
                
                setTimeout(() => {
                    errorPopup.style.display = 'none';
                }, 900);
            }
            document.getElementById('codeInput').value = ''; // Clear input
        }

        // Initialize and start timers
        updateRevealedLetters();
        updateTimer(); // Call immediately
        setInterval(updateTimer, 1000); // Update timer every second
        setInterval(updateRevealedLetters, 1000); // Check for new reveals every second

        // Reset button for testing (you can remove this in production)
        function resetProgress() {
            localStorage.removeItem('startDate');
            location.reload();
        }
    </script>
</body>
</html>